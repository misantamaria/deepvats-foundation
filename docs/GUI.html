---

title: GUI 

keywords: fastai
sidebar: home_sidebar

summary: "This notebook contains the code of an interactive webapp, inspired by the app shown in the [video](https://www.youtube.com/watch?v=arA3XuXZ7OQ) associated to the TimeCluster paper. The app is deployed using the [Voila](https://github.com/voila-dashboards/voila) python package."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_GUI.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    {% raw %}
        
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The data that will be used in this GUI is one day of longwall mining activity.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_numeric_vars</span><span class="p">(</span><span class="s1">&#39;/home/jovyan/data/input_data.csv&#39;</span><span class="p">,</span> 
                       <span class="n">cname_ts</span><span class="o">=</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> 
                       <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
                       <span class="n">nan_replacement</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/opt/conda/lib/python3.7/site-packages/IPython/core/interactiveshell.py:3242: DtypeWarning: Columns (18,19,20,21,22,23,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,93,94,95) have mixed types. Specify dtype option on import or set low_memory=False.
  if (await self.run_code(code, result,  async_=asy)):
/opt/conda/lib/python3.7/site-packages/pandas/core/frame.py:3509: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  self[k1] = value[k2]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Components">Components<a class="anchor-link" href="#Components">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Sidebar">Sidebar<a class="anchor-link" href="#Sidebar">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The sidebar contains control widgets to adjust the parameters needed for executing the methods of the module <code>Timecluster_replication</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Window-size-&amp;-stride">Window size &amp; stride<a class="anchor-link" href="#Window-size-&amp;-stride">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">input_wsize</span><span class="o">.</span><span class="n">v_model</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>60
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">input_stride</span> <span class="o">=</span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">input_wsize</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span><span class="n">thumb_label</span><span class="o">=</span><span class="s1">&#39;always&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;px-4&quot;</span><span class="p">,</span> <span class="n">v_model</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">input_stride</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span><span class="n">thumb_label</span><span class="o">=</span><span class="s1">&#39;always&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;px-4&quot;</span><span class="p">,</span> <span class="n">v_model</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">#input_wsize.on_event(&#39;change&#39;, lambda widget, event, data: print(input_wsize.v_model))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">input_wsize</span><span class="o">.</span><span class="n">v_model</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">input_wsize</span><span class="p">,</span> <span class="n">input_stride</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[None, None]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Time-series-view">Time series view<a class="anchor-link" href="#Time-series-view">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> widget
<span class="n">fig2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Line Chart&#39;</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">fig2</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
<span class="n">fig2</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
<span class="n">fig2</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">min_height</span> <span class="o">=</span> <span class="s1">&#39;300px&#39;</span> <span class="c1"># so it shows nicely in the notebook</span>
<span class="n">fig2</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="2D-projection">2D projection<a class="anchor-link" href="#2D-projection">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Set-up-voila-vuetify-layout">Set up voila vuetify layout<a class="anchor-link" href="#Set-up-voila-vuetify-layout">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The voila vuetify template does not render output from the notebook, it only shows widget with the mount_id metadata.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">v</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">pa_4</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
         <span class="n">_metadata</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;mount_id&#39;</span><span class="p">:</span> <span class="s1">&#39;content-nav&#39;</span><span class="p">},</span> 
         <span class="n">column</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
         <span class="n">children</span><span class="o">=</span><span class="p">[</span>
             <span class="n">v</span><span class="o">.</span><span class="n">Subheader</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Window size&quot;</span><span class="p">]),</span> <span class="n">wsize_slider</span>
         <span class="p">]);</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">v</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">_metadata</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;mount_id&#39;</span><span class="p">:</span> <span class="s1">&#39;content-main&#39;</span><span class="p">},</span> 
         <span class="n">column</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
         <span class="n">wrap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
         <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">v</span><span class="o">.</span><span class="n">Flex</span><span class="p">(</span><span class="n">xs12</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lg6</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xl4</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">fig2</span><span class="p">])</span>
         <span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}
</div>
 

